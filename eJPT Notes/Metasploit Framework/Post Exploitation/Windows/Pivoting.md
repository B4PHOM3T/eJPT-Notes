
+ Pivoting is a post exploitation technique that involves utilizing a compromised host to attack other systems on the compromised host's private internal network.

+ After gaining access to one host, we can use the compromised host to exploit other hosts on the same internal network to which we could not access previously.

+ Meterpreter provides us with the ability to add a network route to the internal network's subnet and consequently scan and exploit other systems on the network.

![[Pasted image 20231011204806.png]]

### How to pivot ?

1. We can first try and ping the first and second victim machines. One of them should be in a different subnet and we shouldn't be able to ping them. 

2. We will gain access to the target system which is accessible to us.

3. After gaining access to the target machine, we can use `ipconfig` inside `shell` in the target machine to check the various interfaces available. In our case, both the victim machines are in the same subnet.

4. Since now we have a session open on a compromised host within the target network, we can use the `autoroute` command to specify the target subnets that you want to route through the compromised host.
```
run autoroute -s 10.2.27.0/20
```

5. Once the routing is set up, any traffic destined for the specified subnets will be forwarded through the compromised host, allowing you to intercept and analyze network traffic.

6. We can now use the TCP portscan module to run a scan on the previously inaccessible host in the subnet.
```
use auxiliary/scanner/portscan/tcp
```

7. Since this route is only accessible through `msfconsole`, we cannot interact with the second host outside `msfconsole`.


